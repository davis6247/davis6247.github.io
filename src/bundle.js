!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class i{constructor(){this.youtubeAPIDomain=" https://www.googleapis.com/youtube/v3/",this.key="key=AIzaSyCJCTzBL97WuTiKWiy4H2FR8NoT6vm2Kvg",this.nextPageToken="",this.assembledRequest=""}searchListRequest(e,t=20){return new Promise((n,i)=>{const s="maxResults="+t,o="q="+e.split(" ").join("+");this.assembledRequest=this.assembleRequest("search",o,"part=snippet","type=video",s,this.key),this.XMLHttpRequest(this.assembledRequest).then(e=>{let t=JSON.parse(e);this.nextPageToken=t.nextPageToken,n(t)})})}videosListRequest(e,t){return new Promise((n,i)=>{const s="part="+e,o="id="+t;let r=this.assembleRequest("videos",s,o,this.key);this.XMLHttpRequest(r).then(e=>{let t=JSON.parse(e);n(t)})})}channelsListRequest(e,t="snippet"){return new Promise((n,i)=>{const s="id="+e,o="part="+t;let r=this.assembleRequest("channels",s,o,this.key);this.XMLHttpRequest(r).then(e=>{let t=JSON.parse(e);n(t)})})}assembleRequest(e,...t){return this.youtubeAPIDomain+e+"?"+t.join("&")}XMLHttpRequest(e){return new Promise((t,n)=>{let i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=(()=>{if(4===i.readyState)if(200===i.status||0==i.status){let e=i.responseText;t(e)}else n("Connection Error")}),i.send(null)})}nextPageRequest(){return new Promise((e,t)=>{if(""===this.nextPageRequest)t("request is not set upped");else if(""===this.nextPageToken)t("set upped request does not have nextPageToken");else{let n=this.assembledRequest+"&pageToken="+this.nextPageToken;this.XMLHttpRequest(n).then(t=>{let n=JSON.parse(t);this.nextPageToken=n.nextPageToken,e(n)}).catch(()=>{t("Connection Error")})}})}}let s,o={videoList:{start:()=>{document.querySelector("#video-list-container .loading-indicator-wrapper").style.display="flex",document.querySelector("#video-list-container .loading-indicator").style.display="block"},finish:()=>{document.querySelector("#video-list-container .loading-indicator-wrapper").style.display="none",document.querySelector("#video-list-container .loading-indicator").style.display="none"}},videoSection:{start:()=>{document.querySelector("#video-section-background .loading-indicator-wrapper").style.display="flex",document.querySelector("#video-section-background .loading-indicator").style.display="block"},finish:()=>{document.querySelector("#video-section-background .loading-indicator-wrapper").style.display="none",document.querySelector("#video-section-background .loading-indicator").style.display="none"}}},r={publicationDate:e=>{let t=new Date(e);return["January","February","April","March","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()},viewCount:e=>Number.parseInt(e).toLocaleString("en")},l=0,d=function(e){o.videoSection.start(),document.getElementById("video-section-background").style.display="block",s=document.getElementById("video-wrapper");let t=this.dataset.id,n=this.dataset.channelId,r=new i;r.videosListRequest("snippet,statistics",t).then(e=>{a(e)}),r.channelsListRequest(n).then(e=>{a(e)}),u(t),document.getElementById("close-btn").addEventListener("click",h),p()},a=e=>{if("youtube#videoListResponse"===e.kind){s.querySelector("#video-title span").innerText=e.items[0].snippet.title,s.querySelector("#video-description span").innerText=e.items[0].snippet.description,s.querySelector("#video-publication-date span").innerText=r.publicationDate(e.items[0].snippet.publishedAt),s.querySelector("#video-author span").innerText=e.items[0].snippet.channelTitle,s.querySelector("#video-views-count span").innerText=r.viewCount(e.items[0].statistics.viewCount),l++,c()}else if("youtube#channelListResponse"===e.kind){s.querySelector("#video-author img").setAttribute("src",e.items[0].snippet.thumbnails.default.url),l++,c()}},c=()=>{l<2||(s.style.display="block",o.videoSection.finish())},u=e=>{document.querySelector(".video-player-wrapper").insertAdjacentHTML("afterBegin",'<iframe id="video-player" type="text/html" width="100%" height="100%"                 frameborder="0" allowfullscreen="allowfullscreen" /></iframe>');let t="https://www.youtube.com/embed/"+e+"?autoplay=1&rel=0";document.getElementById("video-player").setAttribute("src",t)},p=()=>{let e={start:null,x:null,ratio:100/window.innerWidth},t=document.getElementById("video-wrapper");t.addEventListener("touchstart",function(t){!function(e){e.start=event.touches[0].clientX,e.x=event.touches[0].clientX}(e)}),t.addEventListener("touchmove",function(t){!function(e){e.x=event.touches[0].clientX;let t=(e.x-e.start)*e.ratio-50;document.getElementById("video-wrapper").style.webkitTransform="translateX("+t+"%)"}(e)}),t.addEventListener("touchend",function(t){!function(e){if(Math.abs(e.x-e.start)>150)h();else{let e=document.getElementById("video-wrapper");e.style.webkitTransform="translateX(-50%)"}}(e)})},h=e=>{let t=document.getElementById("video-player");t.innerHTML="",t.remove(),s.style.display="none",document.getElementById("video-section-background").style.display="none"};let m=()=>{document.getElementById("search-btn").addEventListener("click",y);let e=document.getElementById("search-bar");e.addEventListener("keypress",y),e.focus()},y=e=>{if("keypress"===e.type&&13!==e.keyCode)return;let t=document.getElementById("search-bar").value;if(0===t.length)return;let n=document.getElementById("search-btn");n.removeEventListener("click",y);let s=document.getElementById("search-bar");s.removeEventListener("keypress",y),f(),window.myApp.videoList&&window.myApp.videoList.reset(),window.myApp.videoList=new class{constructor(){this.youtubeAPIsearchList,this.preloadedVideosElementsArray,this.bindedScrollEventOnVideoListContainer}getVideos(e){o.videoList.start();let t=function(){if(window.innerWidth<1400)return 25;let e=Math.floor(screen.width*screen.height/53520);return e>50?50:e}();this.youtubeAPIsearchList=new i,this.youtubeAPIsearchList.searchListRequest(e,t).then(e=>{let t=this.processSearchList(e);return this.addViewCountToItems(t)}).then(e=>{let t=document.getElementById("video-list-container");this.bindedScrollEventOnVideoListContainer=this.continueSearchOnBottomScroll.bind(this),t.addEventListener("scroll",this.bindedScrollEventOnVideoListContainer),o.videoList.finish(),setTimeout(this.displayVideos(e),0),setTimeout(this.preloadVideos(),0)})}processSearchList(e){let t=[],n=function(){let e=document.createElement("template");return e.insertAdjacentHTML("afterbegin",'<li>                    <div class="thumbnail-wrapper">                        <img class="thumbnail">                    </div>                    <div class="video-item-info">                        <p class="video-list-views-count"><span></span>views</p>                        <p class="video-list-title"></p>                    </div>                </li>'),e.firstChild}();for(let i of e.items){let e=n.cloneNode(!0);e.dataset.id=i.id.videoId,e.dataset.channelId=i.snippet.channelId;let s=e.querySelector(".thumbnail"),o=i.snippet.thumbnails.medium.url;s.setAttribute("src",o),e.querySelector(".video-list-title").innerHTML=i.snippet.title,e.addEventListener("click",d),t.push(e)}return t}addViewCountToItems(e){return new Promise((t,n)=>{let s=[];for(let t of e){let e=new Promise((e,n)=>{(new i).videosListRequest("statistics",t.dataset.id).then(n=>{t.querySelector(".video-list-views-count span").innerText=r.viewCount(n.items[0].statistics.viewCount),e()})});s.push(e)}Promise.all(s).then(()=>{t(e)})})}displayVideos(e){let t=document.getElementById("video-list");t.style.display="hidden";for(let n of e)t.insertAdjacentElement("beforeend",n);t.style.display="flex"}continueSearchOnBottomScroll(e){let t=e.target;if(t.scrollTop+t.clientHeight<=t.scrollHeight-300)return;if(!0===this.continueSearchFired)return;o.videoList.start(),this.continueSearchFired=!0;let n=()=>{this.preloadedVideosElementsArray?(setTimeout(this.displayVideos(this.preloadedVideosElementsArray),0),this.preloadedVideosElementsArray=null,this.continueSearchFired=!1,o.videoList.finish(),this.preloadVideos()):setTimeout(n,50)};n()}preloadVideos(){if(void 0===this.youtubeAPIsearchList.nextPageToken){let e=document.createElement("h2");return e.innerText="Further only nothingness",e.classList.add("end-of-the-search"),document.getElementById("video-list").insertAdjacentElement("beforeEnd",e),Ñ‹,void this.removeScrollEventFromVideoList()}this.youtubeAPIsearchList.nextPageRequest().then(e=>{let t=this.processSearchList(e);return this.addViewCountToItems(t)}).then(e=>{this.preloadedVideosElementsArray=e}).catch(()=>{this.preloadedVideosElementsArray=null})}reset(){this.removeScrollEventFromVideoList(),this.clearVideoList()}clearVideoList(){let e=document.getElementById("video-list");for(;e.firstChild;)e.firstChild.removeEventListener("click",d.popUp),e.firstChild.innerHTML="",e.firstChild.remove()}removeScrollEventFromVideoList(){document.getElementById("video-list-container").removeEventListener("scroll",this.bindedScrollEventOnVideoListContainer)}},window.myApp.videoList.getVideos(t),n.addEventListener("click",b,{once:!0}),s.addEventListener("input",v,{once:!0}),window.innerWidth<1023&&w()},v=e=>{document.getElementById("search-btn").removeEventListener("click",b),g(),m()},b=e=>{let t=document.getElementById("search-bar");t.removeEventListener("input",v),t.value="",g(),m()},f=()=>{let e=document.getElementById("search-btn");document.querySelector("#search-btn span").style.display="none",e.style.fontSize="16px"},g=()=>{let e=document.getElementById("search-btn");document.querySelector("#search-btn span").style.display="block",e.style.fontSize="0px"},w=()=>{let e=document.createElement("input");e.setAttribute("type","text"),document.body.appendChild(e),e.focus(),e.style.display="none",e.remove()};n.d(t,"getTxtFile",function(){return E}),window.onload=(()=>{L(),window.myApp={}});let L=()=>{E("./src/src_html/initial_html.txt").then(e=>{document.body.insertAdjacentHTML("beforeend",e),m()})},E=e=>new Promise((t,n)=>{let i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=(()=>{if(4===i.readyState&&(200===i.status||0==i.status)){let e=i.responseText;t(e)}}),i.send(null)})}]);